

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; KairosDB 0.9.4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/scrollwide.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="KairosDB 0.9.4 documentation" href="index.html" />
    <link rel="next" title="Pushing data" href="PushingData.html" />
    <link rel="prev" title="KairosDB documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="PushingData.html" title="Pushing data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="KairosDB documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">KairosDB 0.9.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>KairosDB runs with java 1.6 or later.</p>
<blockquote>
<div># Download the tar.gz file from the Downloads section
# Extract to where you wish to run from
# In conf/kairosdb.properties change the kairosdb.service.datastore property to the datastore you wish to use.  It defaults to an in memory H2 database (that is slow)
# Make sure that JAVA_HOME is set to your java install.
# Change to the bin directory and run &gt;./kairosdb.sh run</div></blockquote>
<div class="section" id="changing-file-handle-limit-on-linux">
<h3>Changing File Handle Limit on Linux<a class="headerlink" href="#changing-file-handle-limit-on-linux" title="Permalink to this headline">¶</a></h3>
<p>If you have a lot of clients pushing metrics, you may run out of file handles. We recommend increasing the number of file handles. Here is an example of [<a class="reference external" href="http://tech-torch.blogspot.com/2009/07/linux-ubuntu-tomcat-too-many-open-files.html">http://tech-torch.blogspot.com/2009/07/linux-ubuntu-tomcat-too-many-open-files.html</a> changing file handles on CentOS].</p>
<div class="section" id="changing-datastore">
<h4>Changing Datastore<a class="headerlink" href="#changing-datastore" title="Permalink to this headline">¶</a></h4>
<p>KairosDB can be configured to use one of several backends for storing data.  By default KairosDB is configured to use an in memory H2 database to store datapoints.  To change the datastore that is used change the <tt class="docutils literal"><span class="pre">kairosdb.service.datastore</span></tt> property in the kairosdb.properties file.</p>
<div class="section" id="using-with-h2">
<h5>Using with H2<a class="headerlink" href="#using-with-h2" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">kairosdb.service.datastore=org.kairosdb.datastore.h2.H2Module</span></tt></p>
<p>By default KairosDB is configured to run using the H2 datbase.  This lets you do development work without setting up and running Cassandra or HBase.</p>
</div>
<div class="section" id="configuration-options">
<h5>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>kairosdb.datastore.h2.database_path</td>
<td>Location of H2 database</td>
</tr>
</tbody>
</table>
<p>Deleting the database folder and restarting KairosDB will cause the database to be recreated with no data.</p>
</div>
</div>
<div class="section" id="configuring-cassandra">
<h4>Configuring Cassandra<a class="headerlink" href="#configuring-cassandra" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">kairosdb.service.datastore=org.kairosdb.datastore.cassandra.CassandraModule</span></tt></p>
<p>The default configuration for Cassandra is to use wide rows.  Each row is set to contain 3 weeks of data.  The reason behind setting it to 3 weeks is if you wrote a metric every millisecond for 3 weeks it would be just over 1 billion columns.  Cassandra has a 2 billion column limit.</p>
<p>The row size has been a point of some confusion.  Basically it comes down to this: The more data you can fit into a single row the better the system will perform when querying the data.  This does not mean that Cassandra only holds 3 weeks worth of data, it means data is written to the same row for 3 weeks before going to a new row.  See the [CassandraSchema cassandra schema for more details].</p>
<p>Changing the read_repair_chance:  This value tells cassandra how often to perform a read repair.  The read repair chance will default to 1 (100% chance).  The recommended value is 0.1 (10% chance).  To change this log into the cassandra-cli client and run the following commands</p>
<div class="highlight-python"><pre>&gt; use kairosdb;
&gt; update column family data_points with read_repair_chance = 0.1;
&gt; update column family row_key_index with read_repair_chance = 0.1;
&gt; update column family string_index with read_repair_chance = 0.1;</pre>
</div>
<div class="section" id="id1">
<h5>Configuration Options<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<p>For a complete list of options please see the Cassandra section in kairosdb.properties.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>kairosdb.datastore.cassandra.host_name</td>
<td>Host name or IP address of Cassandra server</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.cassandra.port</td>
<td>Port number of Cassandra server</td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.cassandra.replication_factor</td>
<td>Replication factor when writing data to Cassandra [<a class="reference external" href="http://www.datastax.com/docs/1.0/cluster_architecture/replication">http://www.datastax.com/docs/1.0/cluster_architecture/replication</a> more info]</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.cassandra.row_width</td>
<td>The number of milliseconds in a row.  The default is 7257600000 which equates to about 12 weeks.  Changing this value after loading data into the system could cause unexpected results.</td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.cassandra.write_delay</td>
<td>The amount of time a background thread waits before writing data to Cassandra.  This allows batching data to the datastore.</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.cassandra.single_row_read_size</td>
<td>The number of columns read when reading a single row.  This is a balance between performance and memory usage.  This value is used when querying the row key index and when performing subsequent queries on a row after the initial multi get.</td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.cassandra.multi_row_read_size</td>
<td>The number of columns read on the initial multi get for a query.  If your data has very few tags make this number big.  If your metrics have lots of tag combinations then back this number down or you may run into out of memory issues.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="configuring-hbase">
<h4>Configuring HBase<a class="headerlink" href="#configuring-hbase" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">kairosdb.service.datastore=net.opentsdb.kairosdb.HBaseModule</span></tt></p>
<p>You will need to create the tables in HBase manually.  The create table script is located in the bin directory you can run it like so:</p>
<div class="highlight-python"><pre>&gt; env COMPRESSION=none HBASE_HOME=path/to/hbase-0.94.X ./src/create_table.sh</pre>
</div>
<p>Have a look at the original [<a class="reference external" href="http://opentsdb.net/getting-started.html">http://opentsdb.net/getting-started.html</a> OpenTSDB documentation] for explanations on setting up HBase.</p>
<p>The HBase code was taken directly from the original [<a class="reference external" href="http://opentsdb.net/index.html">http://opentsdb.net/index.html</a> OpenTSDB] project.  Database layout and the finer points of configuration can be found on their web site.</p>
<p>&lt;font color=&#8221;red&#8221;&gt;Note:  HBase currently only supports per second data.&lt;/font&gt;</p>
<div class="section" id="id2">
<h5>Configuration Options<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>kairosdb.datastore.hbase.timeseries_table</td>
<td>Name of the time series table within HBase</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.hbase.uinqueids_table</td>
<td>Name of the unique id table within HBase.</td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.hbase.zoo_keeper_quorum</td>
<td>Host name of the zoo keeper quorum</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.hbase.zoo_keeper_base_dir</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.hbase.auto_create_metrics</td>
<td>You need to leave this as true for now as there is no api for adding metric names.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="configuring-as-a-remote-datastore">
<h4>Configuring as a Remote Datastore<a class="headerlink" href="#configuring-as-a-remote-datastore" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">kairosdb.service.datastore=org.kairosdb.datastore.remote.RemoteModule</span></tt></p>
<p>Configuring Kairos as a remote datastore sets up the local Kairos instance to store and forward incoming data points to a remote Kairos server.  Data is stored in a directory in json format.  On a configurable schedule a background thread will compress the data and upload the data points to a remote KairosDB instance.</p>
<div class="section" id="id3">
<h5>Configuration Options<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>kairosdb.datastore.remote.data_dir</td>
<td>Directory in which the data points are collected.  Defaults to the current directory.</td>
</tr>
<tr class="row-even"><td>kairosdb.datastore.remote.remote_url</td>
<td>URL of the KairosDB instance to which data will be forwarded.  Ex. <a class="reference external" href="http://10.10.10.10:8080">http://10.10.10.10:8080</a></td>
</tr>
<tr class="row-odd"><td>kairosdb.datastore.remote.schedule</td>
<td>Quartz cron schedule for how often to upload collected data.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section" id="starting-and-stopping">
<h2>Starting and Stopping<a class="headerlink" href="#starting-and-stopping" title="Permalink to this headline">¶</a></h2>
<p>Starting and stoping KairosDB is done by running the kairosdb.sh script from within the bin directory.</p>
<p>To start KairosDB and run in the foreground type</p>
<div class="highlight-python"><pre>&gt; ./kairosdb.sh run</pre>
</div>
<p>To run KairosDB as a background process type</p>
<div class="highlight-python"><pre>&gt; ./kairosdb.sh start</pre>
</div>
<p>To stop KairosDB when running as a background process type</p>
<div class="highlight-python"><pre>&gt; ./kairosdb.sh stop</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#install">Install</a><ul>
<li><a class="reference internal" href="#changing-file-handle-limit-on-linux">Changing File Handle Limit on Linux</a><ul>
<li><a class="reference internal" href="#changing-datastore">Changing Datastore</a><ul>
<li><a class="reference internal" href="#using-with-h2">Using with H2</a></li>
<li><a class="reference internal" href="#configuration-options">Configuration Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-cassandra">Configuring Cassandra</a><ul>
<li><a class="reference internal" href="#id1">Configuration Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-hbase">Configuring HBase</a><ul>
<li><a class="reference internal" href="#id2">Configuration Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-as-a-remote-datastore">Configuring as a Remote Datastore</a><ul>
<li><a class="reference internal" href="#id3">Configuration Options</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#starting-and-stopping">Starting and Stopping</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">KairosDB documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="PushingData.html"
                        title="next chapter">Pushing data</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/GettingStarted.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="PushingData.html" title="Pushing data"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="KairosDB documentation"
             >previous</a> |</li>
        <li><a href="index.html">KairosDB 0.9.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Jeff Sabin.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>